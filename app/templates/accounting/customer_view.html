{% extends 'base.html' %}
{% block title %}Customer View{% endblock %}

{% block content %}
<h3>Customer Details</h3>

<div class="card mb-3">
  <div class="card-body">
    <p><strong>Type:</strong> {{ customer.customer_type }}</p>
    <p><strong>Full Name:</strong> {{ customer.full_name or '-' }}</p>
    <p><strong>Business Name:</strong> {{ customer.business_name or '-' }}</p>
    <p><strong>Phone:</strong> {{ customer.phone_number }}</p>
    <p><strong>Status:</strong> 
      {% if customer.is_active %}
        <span class="badge bg-success">Active</span>
      {% else %}
        <span class="badge bg-secondary">Disabled</span>
      {% endif %}
    </p>
    <p><strong>Current Balance:</strong> {{ "{:,.2f}".format(balance or 0) }}</p>
    <a href="{{ url_for('accounting_routes.toggle_customer_status', customer_id=customer.id) }}"
       class="btn btn-sm {{ 'btn-danger' if customer.is_active else 'btn-success' }}">
      {{ 'Disable' if customer.is_active else 'Enable' }}
    </a>
  </div>
</div>

<!-- Opening Balance Form -->
<h5>Opening Balance</h5>
<form method="POST" action="{{ url_for('accounting_routes.add_opening_balance', customer_id=customer.id) }}">
  <div class="row g-2 align-items-end">
    <div class="col-md-3">
      <label>Opening Balance Amount</label>
      <input type="number" step="0.01" name="opening_balance" class="form-control" required>
    </div>
    <div class="col-md-2">
      <label>Date</label>
      <input type="date" name="date" class="form-control" required value="{{ current_date }}">
    </div>
    <div class="col-md-2">
      <button type="submit" class="btn btn-success">ðŸ’¾ Save Opening Balance</button>
    </div>
  </div>
</form>

<a href="{{ url_for('accounting_routes.customer_list') }}" class="btn btn-secondary mt-4">â¬… Back to List</a>
{% endblock %}
